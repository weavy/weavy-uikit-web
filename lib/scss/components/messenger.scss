@use "../base/color";
@use "../base/var";
@use "../base/breakpoints";

$messenger-default-padding: var.wy-rem(0.5); // corresponds to browser default 8px margin for body element
$messenger-conversation-list-max-width: var.wy-rem(24);
$messenger-conversation-min-width: var.wy-rem(16);

[part~="wy-messenger-layout"] {
  display: flex;
  flex: 1;
  align-items: stretch;
  position: relative;
  container-type: inline-size;
  align-self: stretch;
  min-height: 0;
  min-width: 0;
  box-sizing: border-box;
}

[part~="wy-messenger-overlay-container"] {
  --wy-padding-outer: #{var.default(--wy-padding)};
  --wy-component-offset-top: calc(#{var.default(--wy-padding)} + #{var.default(--wy-titlebar-height)});
}

[part~="wy-messenger-conversation-list"] {
  flex: 0 1 100%;
  min-width: 0;
  max-width: none;
  display: flex;
  flex-direction: column;
  padding: var.default(--wy-padding-outer);
  gap: var.default(--wy-padding);
}

[part~="wy-messenger-conversation"] {
  display: flex;
  flex-direction: column;
  overflow-anchor: none;
  height: 100%;
  width: 100%;
  flex: 0 1 100%;
  box-sizing: border-box;
  padding: var.default(--wy-padding-outer);
  --wy-component-offset-top: #{var.default(--wy-titlebar-height)};
}

[part~="wy-close-conversation"] {
  display: contents;
}

// Layered layout
@include breakpoints.container-size-down(md) {
  [part~="wy-messenger-conversation-list"]:not([data-conversation-id=""]) {
    display: none;
  }

  [part~="wy-messenger-conversation"][data-conversation-id=""] {
    display: none;
  }
}

// Side by side full-width view
@include breakpoints.container-size-up(md) {
  [part~="wy-messenger-conversation-list"] {
    flex: 0 1 50%;
    max-width: $messenger-conversation-list-max-width;
    padding-right: var(--wy-padding-outer, #{$messenger-default-padding});
    border-right: var.default(--wy-border) solid color.token(--wy-outline-variant);
  }

  [part~="wy-messenger-conversation"] {
    min-width: max(50%, #{$messenger-conversation-min-width});
    padding-left: var(--wy-padding-outer, #{$messenger-default-padding});
  }

  [part~="wy-close-conversation"] {
    display: none;
  }
}
